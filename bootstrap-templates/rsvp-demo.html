<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>אישור הגעה - משה כהן</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="bootstrap-styles.css">
</head>
<body>
    <div class="min-vh-100 py-4">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <!-- Event Invitation Image with Language Selector -->
                    <div class="position-relative rounded-4 overflow-hidden shadow-lg mb-4">
                        <img 
                            src="src/assets/event-invitation.jpg" 
                            alt="הזמנה לאירוע" 
                            class="img-fluid w-100"
                            style="height: 300px; object-fit: cover;"
                        >
                        
                        <!-- Language Selector - Top Right -->
                        <div class="position-absolute top-0 end-0 p-3">
                            <div class="dropdown">
                                <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown">
                                    <i class="fas fa-globe"></i> <span id="current-lang">עברית</span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="setLanguage('he')"><i class="fas fa-flag"></i> עברית</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="setLanguage('en')"><i class="fas fa-flag"></i> English</a></li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="position-absolute top-0 start-0 w-100 h-100 bg-gradient"></div>
                    </div>

                    <!-- Welcome Card -->
                    <div class="card bg-primary text-white shadow-sm mb-4">
                        <div class="card-body text-center py-4">
                            <h1 class="card-title display-5 fw-bold mb-3">
                                <span data-i18n="rsvp.welcome">שלום משה כהן!</span>
                            </h1>
                            <p class="lead mb-0">
                                <span data-i18n="rsvp.eventInvitation">אתה מוזמן לחתונה של שייקי ומיכל</span>
                            </p>
                        </div>
                    </div>

                    <!-- RSVP Form -->
                    <div class="card shadow-lg mb-4">
                        <div class="card-header bg-success text-white text-center py-3">
                            <h2 class="card-title mb-0">
                                <i class="fas fa-check-circle"></i> <span data-i18n="rsvp.confirmTitle">אישור הגעה</span>
                            </h2>
                            <p class="mb-0 mt-2">
                                <span data-i18n="rsvp.confirmDescription">אנא בחר כמה אנשים יגיעו</span>
                            </p>
                        </div>
                        <div class="card-body p-4">
                            <form onsubmit="handleSubmit(event)">
                                <div class="row g-4 mb-4">
                                    <!-- Men Count -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold" for="menCount">
                                            <span data-i18n="rsvp.menCount">מספר גברים</span>
                                        </label>
                                        <div class="input-group input-group-lg">
                                            <button
                                                type="button"
                                                class="btn btn-outline-secondary"
                                                onclick="decrementMen()"
                                                id="decrease-men"
                                                disabled
                                            >
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <input
                                                id="menCount"
                                                type="number"
                                                min="0"
                                                max="10"
                                                value="0"
                                                onchange="updateMenCount(this.value)"
                                                class="form-control text-center fs-4"
                                            >
                                            <button
                                                type="button"
                                                class="btn btn-outline-secondary"
                                                onclick="incrementMen()"
                                                id="increase-men"
                                            >
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Women Count -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold" for="womenCount">
                                            <span data-i18n="rsvp.womenCount">מספר נשים</span>
                                        </label>
                                        <div class="input-group input-group-lg">
                                            <button
                                                type="button"
                                                class="btn btn-outline-secondary"
                                                onclick="decrementWomen()"
                                                id="decrease-women"
                                                disabled
                                            >
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <input
                                                id="womenCount"
                                                type="number"
                                                min="0"
                                                max="10"
                                                value="0"
                                                onchange="updateWomenCount(this.value)"
                                                class="form-control text-center fs-4"
                                            >
                                            <button
                                                type="button"
                                                class="btn btn-outline-secondary"
                                                onclick="incrementWomen()"
                                                id="increase-women"
                                            >
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Total Display -->
                                <div id="total-display" class="d-none text-center alert alert-info mb-4">
                                    <h5 class="mb-0">
                                        <span data-i18n="rsvp.totalGuests">סה"כ מוזמנים:</span> <span id="total-count" class="fw-bold">0</span>
                                    </h5>
                                </div>

                                <!-- Submit Button -->
                                <button 
                                    type="submit" 
                                    disabled
                                    id="submit-button"
                                    class="btn btn-success btn-lg w-100 py-3"
                                >
                                    <span id="button-text" data-i18n="rsvp.submitButton">אשר הגעה</span>
                                </button>

                                <p id="please-enter" class="text-center text-muted mt-3">
                                    <span data-i18n="rsvp.pleaseEnterGuests">אנא הכנס מספר מוזמנים</span>
                                </p>
                            </form>
                        </div>
                    </div>

                    <!-- Info Card -->
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <p class="mb-2">
                                <i class="fas fa-calendar text-primary"></i>
                                <span data-i18n="rsvp.eventTime">תאריך האירוע: 15 ביוני 2024, שעה 19:00</span>
                            </p>
                            <p class="mb-0">
                                <i class="fas fa-phone text-primary"></i>
                                <span data-i18n="rsvp.contactInfo">לפרטים נוספים: 050-123-4567</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="toast" class="toast" role="alert">
            <div class="toast-header">
                <span id="toast-icon" class="me-2"></span>
                <strong id="toast-title" class="me-auto"></strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-description"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let menCount = 0;
        let womenCount = 0;
        let currentLanguage = 'he';
        let isSubmitting = false;

        const translations = {
            he: {
                'rsvp.welcome': 'שלום משה כהן!',
                'rsvp.eventInvitation': 'אתה מוזמן לחתונה של שייקי ומיכל',
                'rsvp.confirmTitle': 'אישור הגעה',
                'rsvp.confirmDescription': 'אנא בחר כמה אנשים יגיעו',
                'rsvp.menCount': 'מספר גברים',
                'rsvp.womenCount': 'מספר נשים',
                'rsvp.totalGuests': 'סה"כ מוזמנים:',
                'rsvp.submitButton': 'אשר הגעה',
                'rsvp.submitting': 'שולח...',
                'rsvp.pleaseEnterGuests': 'אנא הכנס מספר מוזמנים',
                'rsvp.eventTime': 'תאריך האירוע: 15 ביוני 2024, שעה 19:00',
                'rsvp.contactInfo': 'לפרטים נוספים: 050-123-4567'
            },
            en: {
                'rsvp.welcome': 'Hello Moshe Cohen!',
                'rsvp.eventInvitation': 'You are invited to Shaiki & Michal\'s wedding',
                'rsvp.confirmTitle': 'RSVP Confirmation',
                'rsvp.confirmDescription': 'Please select how many people will attend',
                'rsvp.menCount': 'Number of men',
                'rsvp.womenCount': 'Number of women',
                'rsvp.totalGuests': 'Total guests:',
                'rsvp.submitButton': 'Confirm Attendance',
                'rsvp.submitting': 'Submitting...',
                'rsvp.pleaseEnterGuests': 'Please enter number of guests',
                'rsvp.eventTime': 'Event date: June 15, 2024, 7:00 PM',
                'rsvp.contactInfo': 'For more details: 050-123-4567'
            }
        };

        function showToast(icon, title, description, isError = false) {
            const toast = document.getElementById('toast');
            const toastElement = new bootstrap.Toast(toast);
            const toastIcon = document.getElementById('toast-icon');
            const toastTitle = document.getElementById('toast-title');
            const toastDescription = document.getElementById('toast-description');
            
            toastIcon.textContent = icon;
            toastTitle.textContent = title;
            toastDescription.textContent = description;
            
            if (isError) {
                toast.className = 'toast border-danger';
                toastTitle.className = 'me-auto text-danger';
            } else {
                toast.className = 'toast border-success';
                toastTitle.className = 'me-auto text-success';
            }
            
            toastElement.show();
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            const html = document.documentElement;
            const currentLangSpan = document.getElementById('current-lang');

            if (lang === 'he') {
                html.setAttribute('lang', 'he');
                html.setAttribute('dir', 'rtl');
                currentLangSpan.textContent = 'עברית';
            } else {
                html.setAttribute('lang', 'en');
                html.setAttribute('dir', 'ltr');
                currentLangSpan.textContent = 'English';
            }

            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
        }

        function updateCounts() {
            const totalCount = menCount + womenCount;
            const submitButton = document.getElementById('submit-button');
            const totalDisplay = document.getElementById('total-display');
            const pleaseEnter = document.getElementById('please-enter');
            const totalCountSpan = document.getElementById('total-count');

            document.getElementById('menCount').value = menCount;
            document.getElementById('womenCount').value = womenCount;
            totalCountSpan.textContent = totalCount;

            document.getElementById('decrease-men').disabled = menCount <= 0;
            document.getElementById('increase-men').disabled = menCount >= 10;
            document.getElementById('decrease-women').disabled = womenCount <= 0;
            document.getElementById('increase-women').disabled = womenCount >= 10;

            if (totalCount > 0) {
                submitButton.disabled = false;
                totalDisplay.classList.remove('d-none');
                pleaseEnter.classList.add('d-none');
            } else {
                submitButton.disabled = true;
                totalDisplay.classList.add('d-none');
                pleaseEnter.classList.remove('d-none');
            }
        }

        function incrementMen() {
            if (menCount < 10) {
                menCount++;
                updateCounts();
            }
        }

        function decrementMen() {
            if (menCount > 0) {
                menCount--;
                updateCounts();
            }
        }

        function incrementWomen() {
            if (womenCount < 10) {
                womenCount++;
                updateCounts();
            }
        }

        function decrementWomen() {
            if (womenCount > 0) {
                womenCount--;
                updateCounts();
            }
        }

        function updateMenCount(value) {
            const num = parseInt(value) || 0;
            menCount = Math.max(0, Math.min(10, num));
            updateCounts();
        }

        function updateWomenCount(value) {
            const num = parseInt(value) || 0;
            womenCount = Math.max(0, Math.min(10, num));
            updateCounts();
        }

        function handleSubmit(event) {
            event.preventDefault();
            
            if (isSubmitting || (menCount + womenCount) === 0) {
                return;
            }

            isSubmitting = true;
            const submitButton = document.getElementById('submit-button');
            const buttonText = document.getElementById('button-text');

            submitButton.disabled = true;
            buttonText.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>' + 
                                  (currentLanguage === 'he' ? 'שולח...' : 'Submitting...');

            setTimeout(() => {
                isSubmitting = false;
                submitButton.disabled = false;
                buttonText.textContent = currentLanguage === 'he' ? 'אשר הגעה' : 'Confirm Attendance';

                showToast(
                    '✅', 
                    currentLanguage === 'he' ? 'האישור נשלח בהצלחה!' : 'RSVP Submitted Successfully!',
                    currentLanguage === 'he' ? 'תודה לך משה כהן על האישור' : 'Thank you Moshe Cohen for your confirmation'
                );

                console.log("RSVP Submitted:", {
                    guestName: "משה כהן",
                    phone: "0501234567",
                    menCount,
                    womenCount,
                    totalGuests: menCount + womenCount,
                    timestamp: new Date().toISOString()
                });
            }, 1000);
        }

        updateCounts();
    </script>
</body>
</html>