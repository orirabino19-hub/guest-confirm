<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>אישור הגעה - משה כהן</title>
    <link rel="stylesheet" href="template-styles.css">
</head>
<body>
    <div class="min-h-screen">
        <div class="max-w-2xl mx-auto space-y-8" style="padding: 2rem 1rem;">
            <!-- Event Invitation Image with Language Selector -->
            <div class="relative overflow-hidden rounded-lg shadow-elegant">
                <img 
                    src="src/assets/event-invitation.jpg" 
                    alt="הזמנה לאירוע" 
                    class="rsvp-image"
                >
                
                <!-- Language Selector - Top Right -->
                <div class="absolute top-4 right-4 z-10">
                    <div class="language-selector">
                        <button class="language-button" onclick="toggleLanguage()">
                            🌐 <span id="current-lang">עברית</span>
                        </button>
                        <div class="language-dropdown hidden" id="language-dropdown">
                            <button class="language-option" onclick="setLanguage('he')">🇮🇱 עברית</button>
                            <button class="language-option" onclick="setLanguage('en')">🇺🇸 English</button>
                        </div>
                    </div>
                </div>
                
                <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent"></div>
            </div>

            <!-- Welcome Card -->
            <div class="card bg-gradient-card shadow-soft">
                <div class="card-header text-center" style="padding-bottom: 1rem;">
                    <h1 class="card-title text-2xl md:text-3xl font-bold">
                        <span data-i18n="rsvp.welcome">שלום משה כהן!</span>
                    </h1>
                    <p class="text-muted-foreground text-lg">
                        <span data-i18n="rsvp.eventInvitation">אתה מוזמן לחתונה של שייקי ומיכל</span>
                    </p>
                </div>
            </div>

            <!-- RSVP Form -->
            <div class="card bg-gradient-card shadow-elegant">
                <div class="card-header">
                    <h2 class="card-title text-xl font-semibold text-center text-primary">
                        <span data-i18n="rsvp.confirmTitle">אישור הגעה</span>
                    </h2>
                    <p class="text-center text-muted-foreground">
                        <span data-i18n="rsvp.confirmDescription">אנא בחר כמה אנשים יגיעו</span>
                    </p>
                </div>
                <div class="card-content">
                    <form onsubmit="handleSubmit(event)" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Men Count -->
                            <div class="space-y-2">
                                <label class="label" for="menCount">
                                    <span data-i18n="rsvp.menCount">מספר גברים</span>
                                </label>
                                <div class="counter-controls">
                                    <button
                                        type="button"
                                        class="btn btn-outline btn-icon"
                                        onclick="decrementMen()"
                                        id="decrease-men"
                                        disabled
                                    >
                                        ➖
                                    </button>
                                    <input
                                        id="menCount"
                                        type="number"
                                        min="0"
                                        max="10"
                                        value="0"
                                        onchange="updateMenCount(this.value)"
                                        class="input counter-input"
                                    >
                                    <button
                                        type="button"
                                        class="btn btn-outline btn-icon"
                                        onclick="incrementMen()"
                                        id="increase-men"
                                    >
                                        ➕
                                    </button>
                                </div>
                            </div>

                            <!-- Women Count -->
                            <div class="space-y-2">
                                <label class="label" for="womenCount">
                                    <span data-i18n="rsvp.womenCount">מספר נשים</span>
                                </label>
                                <div class="counter-controls">
                                    <button
                                        type="button"
                                        class="btn btn-outline btn-icon"
                                        onclick="decrementWomen()"
                                        id="decrease-women"
                                        disabled
                                    >
                                        ➖
                                    </button>
                                    <input
                                        id="womenCount"
                                        type="number"
                                        min="0"
                                        max="10"
                                        value="0"
                                        onchange="updateWomenCount(this.value)"
                                        class="input counter-input"
                                    >
                                    <button
                                        type="button"
                                        class="btn btn-outline btn-icon"
                                        onclick="incrementWomen()"
                                        id="increase-women"
                                    >
                                        ➕
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Total Display -->
                        <div id="total-display" class="hidden text-center bg-accent-soft rounded-lg" style="padding: 1rem;">
                            <p class="text-lg font-medium text-accent-foreground">
                                <span data-i18n="rsvp.totalGuests">סה"כ מוזמנים:</span> <span id="total-count">0</span>
                            </p>
                        </div>

                        <!-- Submit Button -->
                        <button 
                            type="submit" 
                            disabled
                            id="submit-button"
                            class="btn btn-primary w-full transition-all"
                            style="font-size: 1.125rem; padding: 1.5rem;"
                        >
                            <span id="button-text" data-i18n="rsvp.submitButton">אשר הגעה</span>
                        </button>

                        <p id="please-enter" class="text-center text-sm text-muted-foreground">
                            <span data-i18n="rsvp.pleaseEnterGuests">אנא הכנס מספר מוזמנים</span>
                        </p>
                    </form>
                </div>
            </div>

            <!-- Info Card -->
            <div class="card bg-muted-soft">
                <div class="card-content" style="padding-top: 1.5rem;">
                    <div class="text-center space-y-2">
                        <p class="text-sm text-muted-foreground">
                            <span data-i18n="rsvp.eventTime">תאריך האירוע: 15 ביוני 2024, שעה 19:00</span>
                        </p>
                        <p class="text-sm text-muted-foreground">
                            <span data-i18n="rsvp.contactInfo">לפרטים נוספים: 050-123-4567</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notification -->
    <div id="toast" class="hidden fixed top-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50">
        <div class="flex items-center">
            <span id="toast-icon" class="text-2xl mr-3"></span>
            <div>
                <div id="toast-title" class="font-semibold"></div>
                <div id="toast-description" class="text-sm text-gray-600"></div>
            </div>
        </div>
    </div>

    <script>
        let menCount = 0;
        let womenCount = 0;
        let currentLanguage = 'he';
        let isSubmitting = false;

        const translations = {
            he: {
                'rsvp.welcome': 'שלום משה כהן!',
                'rsvp.eventInvitation': 'אתה מוזמן לחתונה של שייקי ומיכל',
                'rsvp.confirmTitle': 'אישור הגעה',
                'rsvp.confirmDescription': 'אנא בחר כמה אנשים יגיעו',
                'rsvp.menCount': 'מספר גברים',
                'rsvp.womenCount': 'מספר נשים',
                'rsvp.totalGuests': 'סה"כ מוזמנים:',
                'rsvp.submitButton': 'אשר הגעה',
                'rsvp.submitting': 'שולח...',
                'rsvp.pleaseEnterGuests': 'אנא הכנס מספר מוזמנים',
                'rsvp.eventTime': 'תאריך האירוע: 15 ביוני 2024, שעה 19:00',
                'rsvp.contactInfo': 'לפרטים נוספים: 050-123-4567'
            },
            en: {
                'rsvp.welcome': 'Hello Moshe Cohen!',
                'rsvp.eventInvitation': 'You are invited to Shaiki & Michal\'s wedding',
                'rsvp.confirmTitle': 'RSVP Confirmation',
                'rsvp.confirmDescription': 'Please select how many people will attend',
                'rsvp.menCount': 'Number of men',
                'rsvp.womenCount': 'Number of women',
                'rsvp.totalGuests': 'Total guests:',
                'rsvp.submitButton': 'Confirm Attendance',
                'rsvp.submitting': 'Submitting...',
                'rsvp.pleaseEnterGuests': 'Please enter number of guests',
                'rsvp.eventTime': 'Event date: June 15, 2024, 7:00 PM',
                'rsvp.contactInfo': 'For more details: 050-123-4567'
            }
        };

        function showToast(icon, title, description, isError = false) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toast-icon');
            const toastTitle = document.getElementById('toast-title');
            const toastDescription = document.getElementById('toast-description');
            
            toastIcon.textContent = icon;
            toastTitle.textContent = title;
            toastDescription.textContent = description;
            
            if (isError) {
                toast.className = 'fixed top-4 right-4 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 z-50';
                toastTitle.className = 'font-semibold text-red-800';
                toastDescription.className = 'text-sm text-red-600';
            } else {
                toast.className = 'fixed top-4 right-4 bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 z-50';
                toastTitle.className = 'font-semibold text-green-800';
                toastDescription.className = 'text-sm text-green-600';
            }
            
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        function toggleLanguage() {
            const dropdown = document.getElementById('language-dropdown');
            dropdown.classList.toggle('hidden');
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            const html = document.documentElement;
            const currentLangSpan = document.getElementById('current-lang');
            const dropdown = document.getElementById('language-dropdown');

            if (lang === 'he') {
                html.setAttribute('lang', 'he');
                html.setAttribute('dir', 'rtl');
                currentLangSpan.textContent = 'עברית';
            } else {
                html.setAttribute('lang', 'en');
                html.setAttribute('dir', 'ltr');
                currentLangSpan.textContent = 'English';
            }

            // Update all translatable elements
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            dropdown.classList.add('hidden');
        }

        function updateCounts() {
            const totalCount = menCount + womenCount;
            const submitButton = document.getElementById('submit-button');
            const totalDisplay = document.getElementById('total-display');
            const pleaseEnter = document.getElementById('please-enter');
            const totalCountSpan = document.getElementById('total-count');

            // Update input values
            document.getElementById('menCount').value = menCount;
            document.getElementById('womenCount').value = womenCount;
            totalCountSpan.textContent = totalCount;

            // Update button states
            document.getElementById('decrease-men').disabled = menCount <= 0;
            document.getElementById('increase-men').disabled = menCount >= 10;
            document.getElementById('decrease-women').disabled = womenCount <= 0;
            document.getElementById('increase-women').disabled = womenCount >= 10;

            // Update submit button and total display
            if (totalCount > 0) {
                submitButton.disabled = false;
                totalDisplay.classList.remove('hidden');
                pleaseEnter.classList.add('hidden');
            } else {
                submitButton.disabled = true;
                totalDisplay.classList.add('hidden');
                pleaseEnter.classList.remove('hidden');
            }
        }

        function incrementMen() {
            if (menCount < 10) {
                menCount++;
                updateCounts();
            }
        }

        function decrementMen() {
            if (menCount > 0) {
                menCount--;
                updateCounts();
            }
        }

        function incrementWomen() {
            if (womenCount < 10) {
                womenCount++;
                updateCounts();
            }
        }

        function decrementWomen() {
            if (womenCount > 0) {
                womenCount--;
                updateCounts();
            }
        }

        function updateMenCount(value) {
            const num = parseInt(value) || 0;
            menCount = Math.max(0, Math.min(10, num));
            updateCounts();
        }

        function updateWomenCount(value) {
            const num = parseInt(value) || 0;
            womenCount = Math.max(0, Math.min(10, num));
            updateCounts();
        }

        function handleSubmit(event) {
            event.preventDefault();
            
            if (isSubmitting || (menCount + womenCount) === 0) {
                return;
            }

            isSubmitting = true;
            const submitButton = document.getElementById('submit-button');
            const buttonText = document.getElementById('button-text');

            // Update button to show loading
            submitButton.disabled = true;
            buttonText.innerHTML = '<div class="spinner"></div> ' + (currentLanguage === 'he' ? 'שולח...' : 'Submitting...');

            // Simulate API call
            setTimeout(() => {
                isSubmitting = false;
                submitButton.disabled = false;
                buttonText.textContent = currentLanguage === 'he' ? 'אשר הגעה' : 'Confirm Attendance';

                showToast(
                    '✅', 
                    currentLanguage === 'he' ? 'האישור נשלח בהצלחה!' : 'RSVP Submitted Successfully!',
                    currentLanguage === 'he' ? 'תודה לך משה כהן על האישור' : 'Thank you Moshe Cohen for your confirmation'
                );

                console.log("RSVP Submitted:", {
                    guestName: "משה כהן",
                    phone: "0501234567",
                    menCount,
                    womenCount,
                    totalGuests: menCount + womenCount,
                    timestamp: new Date().toISOString()
                });
            }, 1000);
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const selector = document.querySelector('.language-selector');
            const dropdown = document.getElementById('language-dropdown');
            
            if (!selector.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });

        // Initialize
        updateCounts();
    </script>
</body>
</html>